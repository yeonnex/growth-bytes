## 파이썬 코드로 유연한 파이프라인 정의

DAG로 파이프라인 구조를 정의하고 나면, airflow가 파이프라인을 언제 실행할 것인지 각각의 DAG의 실행주기를 정의할 수 있다. 이를 통해 airflow가 매시간, 매일, 매주 등 DAG를 실행하거나 cron 과 같은 표현식으로 더 복잡한 스케줄을 사용할 수 있다.

airflow가 DAG를 실행하는 방법을 확인하기 위해 airflow DAG에 대한 개발과 실행 프로세스 전체를 살펴보도록 하자. 개념적으로 airflow는 다음 세가지 주요 구성요소를 가지고 있다.

- airflow 스케줄러
	- DAG를 분석하고 현재 시점에서 DAG의 스케줄이 지난 경우 airflow 워커에 DAG의 태스크를 예약한다
- airflow 워커
	- 예약된 태스크를 선택하고 실행한다
- airflow 웹서버
	- 스케줄러에서 실행한 DAG를 시각화하고 DAG 실행과 결과를 확인할 수 있는 주요 인터페이스를 제공한다.

![[Pasted image 20250322142044.png]]

airflow 의 핵심 기능은 `스케줄러`이다. 파이프라인이 실행되는 시기와 방법을 결정하는 일이 일어나는 곳이기 때문이다.

![[Pasted image 20250322142629.png]]

태스크가 실행대기열에 추가되면 airflow 워커 pool의 워커가 태스크를 선택하고 실행한다. 이때 실행은 병렬로 수행되고, 실행 결과는 지속적으로 추적된다. 이 과정의 모든 결과는 airflow의 메타스토어로 전달되어, 사용자가 airflow의 웹 인터페이스를 통해 태스크 진행상황을 추적하고 로그를 확인할 수 있다.


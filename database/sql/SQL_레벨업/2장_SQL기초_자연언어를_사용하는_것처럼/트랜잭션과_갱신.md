<!-- Date: 2025-01-24 -->
<!-- Update Date: 2025-01-24 -->
<!-- File ID: 7009e758-7aa7-4ac3-97a0-2b9c7c58e1ac -->
<!-- Author: Seoyeon Jang -->

# ê°œìš”

SQLì€ 'Structured Query Language'ì˜ ì•½ìì´ë‹¤. 'Query'ëŠ” 'ì§ˆì˜'ë¥¼ ë‚˜íƒ€ë‚´ë©° ì¢ì€ ëœ»ìœ¼ë¡œëŠ” SELECT êµ¬ë¬¸ì„ ë‚˜íƒ€ë‚¸ë‹¤. ì´ë¦„ì—ì„œ ì•Œ ìˆ˜ ìˆë“¯ SQLì€ ì²˜ìŒë¶€í„° ë°ì´í„° ê²€ìƒ‰ì„ ì¤‘ì‹¬ìœ¼ë¡œ
ìˆ˜í–‰í•˜ê¸° ìœ„í•œ ì–¸ì–´ì´ë‹¤. í•œë§ˆë””ë¡œ ë°ì´í„°ë¥¼ ê°±ì‹ í•˜ëŠ” ê²ƒì€ ë¶€ê°€ì ì¸ ê¸°ëŠ¥ì´ë¼ëŠ” ê²ƒì´ë‹¤.

ì—­ì‚¬ì ìœ¼ë¡œë„ SQLì˜ ê²€ìƒ‰ ê¸°ëŠ¥ì€ ì ì  ì¶”ê°€ë˜ë©´ì„œ ë³µì¡í•´ì¡Œë‹¤. í•˜ì§€ë§Œ ê°±ì‹  ê¸°ëŠ¥ì€ ë³µì¡í•˜ì§€ ì•Šë‹¤.

ê¸°ë³¸ì ìœ¼ë¡œ SQLì˜ ê°±ì‹  ì‘ì—…ì€ ë‹¤ìŒ ì„¸ ì¢…ë¥˜ë¡œ ë¶„ë¥˜í•œë‹¤.

-
    1. ì‚½ì…(insert)
-
    2. ì œê±°(delete)
-
    3. ê°±ì‹ (update)

ì´ ì™¸ì—ë„ 1ê³¼ 3ì„ í•©ì¹œ ë¨¸ì§€(MERGE)ë¼ëŠ” ê°±ì‹  ê¸°ëŠ¥ë„ ìˆì§€ë§Œ, ì¼ë‹¨ì€ ìœ„ì˜ 3ê°œ ê¸°ëŠ¥ì„ ìš°ì„  ì•Œì•„ë³´ì.

## INSERT ë¡œ ë°ì´í„° ì‚½ì…

RDBëŠ” ë°ì´í„°ë¥¼ í…Œì´ë¸”ì— ë³´ê´€í•œë‹¤. í…Œì´ë¸”ì€ ë°ì´í„°ë¥¼ ë³´ê´€í•˜ëŠ” ìƒìì— ì§€ë‚˜ì§€ ì•Šìœ¼ë¯€ë¡œ ë‚´ë¶€ì— ë°ì´í„°ê°€ ì—†ìœ¼ë©´ ì‚¬ìš©í•˜ëŠ” ì˜ë¯¸ê°€ ì—†ë‹¤.

RDBì—ì„œ ë°ì´í„°ë¥¼ ë“±ë¡í•˜ëŠ” ë‹¨ìœ„ëŠ” ë ˆì½”ë“œ(í–‰)ì´ë‹¤. ê¸°ë³¸ì ì¸ ë“±ë¡ ë‹¨ìœ„ëŠ” í•˜ë‚˜ì˜ ë ˆì½”ë“œì”©ì´ë‹¤. ì´ë•Œ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ INSERTêµ¬ë¬¸ì´ë‹¤. ë¬¸ì ê·¸ëŒ€ë¡œ ë ˆì½”ë“œë¥¼ 'ì‚½ì…'í•œë‹¤.

```shell
INSERT INTO [í…Œì´ë¸”ì´ë¦„] ([í•„ë“œ1],[í•„ë“œ2],[í•„ë“œ3], ...) VALUES ([ê°’1],[ê°’2], [ê°’3] ...);
```

ì´ë•Œ í•„ë“œ ë¦¬ìŠ¤íŠ¸ì™€ ê°’ ë¦¬ìŠ¤íŠ¸ëŠ” ê°™ì€ ìˆœì„œë¡œ ëŒ€ì‘í•˜ê²Œ ì…ë ¥í•´ì•¼ í•œë‹¤.

ìµœê·¼ì—ëŠ” ì—¬ëŸ¬ ê°œì˜ ë ˆì½”ë“¤ë¥´ í•œ ê°œì˜ INSERT êµ¬ë¬¸ìœ¼ë¡œ ì‚½ì…í•˜ëŠ” ê¸°ëŠ¥(multi-row insert)ì„ ì§€ì›í•˜ëŠ” DBMSë„ ìˆë‹¤.
address í…Œì´ë¸”ì— 3ê°œì˜ ë°ì´í„°ë¥¼ í•œêº¼ë²ˆì— ì‚½ì…í•˜ë©´ ë‹¤ìŒê³¼ ê°™ì´ í•˜ë©´ ëœë‹¤.

```sql
INSERT INTO address (name, phone_nbr, address, sex, age)
VALUES ('ì¸ì„±', '010-1111-2222', 'ì„œìš¸ì‹œ', 'ë‚¨', 30),
       ('ì¤€', '010-1111-3333', 'ë¶€ì‚°ì‹œ', 'ë‚¨', 21),
       ('í•˜ë¦°', '010-1111-4444', 'ì„œê·€í¬ì‹œ', 'ì—¬', 37);
```

ì´ ë°©ë²•ì€ ê°„ë‹¨í•˜ê³  í•œ ë²ˆë§Œ êµ¬ë¬¸ì„ ì‹¤í–‰í•˜ë©´ ëœë‹¤ëŠ” ì ì—ì„œ ì¢‹ë‹¤. í•˜ì§€ë§Œ ëª¨ë“  DBMSë‚˜ ë‚®ì€ ë²„ì „ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ê±´ ì•„ë‹ˆë‹ˆ í™•ì¸í•˜ê³  ì‚¬ìš©í•´ì•¼ í•œë‹¤. ë˜í•œ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆì„ ë•Œ ì–´ë–¤ ë ˆì½”ë“œê°€ ë¬¸ì œì¸ì§€ í™•ì¸í•˜ê¸°
ì–´ë µë‹¤ëŠ” ë‹¨ì ë„ ìˆë‹¤.

## DELETE ë¡œ ë°ì´í„° ì œê±°

ë°ì´í„°ë¥¼ ì‚½ì…í•˜ëŠ” ê¸°ëŠ¥ì´ ìˆìœ¼ë¯€ë¡œ ë°˜ëŒ€ë¡œ ë°ì´í„°ë¥¼ ì‚­ì œí•˜ëŠ” ê¸°ëŠ¥ë„ ìˆë‹¤. ê·¸ëŸ°ë° ë°ì´í„°ë¥¼ ì‚­ì œí•  ë•ŒëŠ” í•˜ë‚˜ì˜ ë ˆì½”ë“œê°€ ì•„ë‹ˆë¼ í•œ ë²ˆì— ì—¬ëŸ¬ê°œì˜ ë ˆì½”ë“œ ë‹¨ìœ„ë¡œ ì²˜ë¦¬í•˜ê²Œ ëœë‹¤. ì–´ì¨Œê±°ë‚˜ ë°ì´í„°ë¥¼ ì œê±°í•  ë•Œ ì‚¬ìš©í•˜ëŠ” ê²ƒì´
DELETE êµ¬ë¬¸ì´ë‹¤.

```sql
DELETE
FROM [í…Œì´ë¸”ì´ë¦„];
```

```sql
DELETE
FROM address;
```

ì´ SQLì€ address í…Œì´ë¸”ì— ë“¤ì–´ìˆëŠ” ëª¨ë“  ë ˆì½”ë“œë¥¼ ì œê±°í•œë‹¤. ë§Œì•½ ë¶€ë¶„ì ìœ¼ë¡œë§Œ ë ˆì½”ë“œë¥¼ ì œê±°í•˜ê³  ì‹¶ì„ ë•ŒëŠ” SELECT êµ¬ë¬¸ì—ì„œ ì‚¬ìš©í–ˆë˜ WHEREêµ¬ë¡œ ì œê±° ëŒ€ìƒì„ ì„ ë³„í•œë‹¤. ì˜ˆë¥¼ ë“¤ì–´ ì£¼ì†Œê°€ ì„œìš¸ì‹œì¸
ì‚¬ëŒì˜ ë ˆì½”ë“œë§Œ ì‚­ì œí•˜ê³  ì‹¶ë‹¤ë©´ ë‹¤ìŒì²˜ëŸ¼ ì‘ì„±í•œë‹¤.

```sql
DELETE
FROM address
WHERE address = 'ì„œìš¸ì‹œ';
```

**DELETE êµ¬ë¬¸ì˜ ì‚­ì œ ëŒ€ìƒì€ í•„ë“œê°€ ì•„ë‹ˆë¼ ë ˆì½”ë“œ**ì´ë¯€ë¡œ DELETE ë’¤ì— í•„ë“œê°€ ì˜¤ì§€ ì•Šê³  ë°”ë¡œ FROM í…Œì´ë¸”ì´ë¦„ì´ ì˜¤ëŠ” ê²ƒì´ë‹¤. ë§Œì•½ ë ˆì½”ë“œì˜ í•„ë“œ ì¼ë¶€ë§Œ ì§€ìš°ê³  ì‹¶ë‹¤ë©´ UPDATE êµ¬ë¬¸ì„ ì‚¬ìš©í•˜ë©´
ëœë‹¤.

DELETE êµ¬ë¬¸ìœ¼ë¡œ ëª¨ë“  ë°ì´í„°ë¥¼ ì‚­ì œí–ˆë‹¤ê³  í…Œì´ë¸” ìì²´ê°€ ì‚¬ë¼ì§€ëŠ” ê²ƒì€ ì•„ë‹ˆë‹¤. í…Œì´ë¸”ì´ë¼ëŠ” ìƒì ğŸ“¦ëŠ” ë‚¨ì•„ìˆìœ¼ë¯€ë¡œ, ê³„ì†í•´ì„œ INSERT í•˜ì—¬ ìƒˆë¡œìš´ ë°ì´í„°ë¥¼ ë„£ì„ ìˆ˜ ìˆë‹¤. í…Œì´ë¸” ìì²´ë¥¼ ì‚­ì œí•˜ê³  ì‹¶ì„ ë•ŒëŠ”
DROP TABLE ì´ë¼ëŠ” ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•œë‹¤.

## UPDATE ë¡œ ë°ì´í„° ê°±ì‹ 

ë°ì´í„°ë¥¼ ìˆ˜ì •í•˜ê³  ì‹¶ë‹¤ë©´ UPDATE êµ¬ë¬¸ì„ ì“´ë‹¤.

```sql
UPDATE [í…Œì´ë¸”ì´ë¦„]
SET
[í•„ë“œì´ë¦„] = [ì‹];
```

UPDATE êµ¬ë¬¸ë„ ì¼ë¶€ ë ˆì½”ë“œë§Œ ê°±ì‹ í•˜ê³  ì‹¶ì„ ë•ŒëŠ” DELETE êµ¬ë¬¸ì²˜ëŸ¼ WHERE êµ¬ë¡œ í•„í„°ë§í•œë‹¤. ì˜ˆë¥¼ ë“¤ì–´ ë¹›ë‚˜ë˜ì˜ ì „í™”ë²ˆí˜¸ê°€ ë‹¤ë¥´ê²Œ ë“±ë¡ë˜ì–´ ìˆ˜ì •í•˜ê³  ì‹¶ë‹¤ë©´ WHERE êµ¬ë¡œ ë¹›ë‚˜ë˜ë§Œ ì„ íƒí•´ì£¼ë©´ ëœë‹¤.

```sql
UPDATE address
SET phone_nbr = '010-6639-7777'
WHERE name = 'ë¹›ë‚˜ë˜';
```

UPDATE êµ¬ë¬¸ì˜ SET êµ¬ì— ì—¬ëŸ¬ ê°œì˜ í•„ë“œë¥¼ ì…ë ¥í•˜ë©´, í•œë²ˆì— ì—¬ëŸ¬ ê°œì˜ ê°’ì„ ë³€ê²½í•  ìˆ˜ ìˆë‹¤. ë”°ë¼ì„œ ì—¬ëŸ¬ê°œì˜ í•„ë“œë¥¼ ê°±ì‹ í•˜ê³  ì‹¶ì„ ë•Œ UPDATE êµ¬ë¬¸ì„ ì—¬ëŸ¬ë²ˆ ì‚¬ìš©í•  í•„ìš”ê°€ ì—†ë‹¤.

í°ë²ˆí˜¸ì™€ ë‚˜ì´ë¥¼ í•œë²ˆì— ìˆ˜ì •í•˜ëŠ” ë°©ë²•ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.

```sql
UPDATE address
SET phone_nbr = '010-6639-7777',
    age       = 27
WHERE name = 'ë¹›ë‚˜ë˜';
```

# ì •ë¦¬

- ê°„ë‹¨í•˜ê³  ì§ê´€ì ìœ¼ë¡œ ì‘ì„±í•  ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì´ ë¹„ì ˆì°¨í˜• ì–¸ì–´ SQLì˜ ì¥ì 
- CASE ì‹ì€ ì¡°ê±´ ë¶„ê¸°ë¥¼ í‘œí˜„í•˜ëŠ” ì¤‘ìš”í•œ ë„êµ¬. **í¬ì¸íŠ¸ëŠ” êµ¬ë¬¸ì´ ì•„ë‹ˆë¼ ì‹ì„ ë°”íƒ•ìœ¼ë¡œ í•œë‹¤ëŠ” ê²ƒ**
- ì¿¼ë¦¬ëŠ” ì…ë ¥ê³¼ ì¶œë ¥ì„ ëª¨ë“œ í…Œì´ë¸”ì— ìˆëŠ” ê²ƒì„ ë°”íƒ•ìœ¼ë¡œ í•  ìˆ˜ ìˆìœ¼ë¯€ë¡œ ìœ ì—°í•¨
- SQLì€ GROUP BY, UNION, INSERSECT ë“± ì§‘í•© ì´ë¡ ì„ ë°”íƒ•ìœ¼ë¡œ ë§Œë“¤ì–´ì§„ ì—°ì‚°ì´ ë§ìŒ
- **ìœˆë„ìš° í•¨ìˆ˜ëŠ” GROUP BY êµ¬ì—ì„œ ì§‘ì•½ ê¸°ëŠ¥ì„ ì œì™¸í•˜ê³  ìë¥´ëŠ” ê¸°ëŠ¥ë§Œ ë‚¨ê¸´ ê²ƒ**

> ì—°ìŠµë¬¸ì œ: address í…Œì´ë¸”ì—ì„œ ì„±ë³„ ë³„ë¡œ ë‚˜ì´ ìˆœìœ„(ê±´ë„ˆë›°ê¸° ìˆê²Œ)ë¥¼ ë§¤ê¸°ëŠ” select êµ¬ë¬¸ì„ ì‘ì„±í•´ë³´ì.

```sql
select name,
       age,
       sex,
       rank() over (partition by sex order by age desc) as rnk_within_sex
from address
order by sex;
```


